교재명 : 스프링으로 하는 마이크로서비스 구축 2E
학습기간 : 2025-04-09 ~


# 필요 설치사항
- JDK 16
- git, docker, curl, jq, spring, siege, helm, kubectl, minikube, istioctl


1장. 마이크로서비스 소개 2025-04-09
2장. 스프링 부트 소개 2025-04-09
3장. 공조 마이크로서비스 집합 생성 2025-04-10
4장. 도커를 사용한 마이크로서비스 배포 2025-04-10 ~ 2025-04-12
5장. OpenAPI를 사용한 API 문서화 2025-04-12
6장. 영속성 추가 2025-04-14
7장. 리액티브 마이크로서비스 개발 2025-04-16 ~ 2025-04-17
8장. 스프링 클라우드 소개 2025-04-17
9장. 넷플릭스 유레카를 사용한 서비스 검색 2025-04-17
10장. 스프링 클라우드 게이트웨이를 에지 서버로 사용 2025-04-17 ~ 2025-04-18
11장. API 접근 보안 2025-04-18
- 향후 개인프로젝트에는 keycloak으로 도입
12장. 구성 중앙화 2025-04-18
13장. Resilience4j를 사용한 복원력 개선 2025-04-20
14장. 분산 추적 2025-04-20
15장. 쿠버네티스 소개 2025-04-21 ~ 2025-04-27
16장. 쿠버네티스에 마이크로서비스 배포 2025-04-27 ~ 2025-05-06
17장. 쿠버네티스로 기존 시스템 환경 대체 2025-05-20
18장. 서비스 메시를 사용해 관찰 가능성 및 관리 편의성 개선
19장. EFK 스택을 사용한 로깅 중앙화
20장. 마이크로서비스 모니터링
22장. 윈도우용 설치 지침 2025-04-10
23장. 자바 마이크로서비스의 네이티브 컴파일

* 17장부터는 교재만으로 학습
- 첫 프로젝트는 docker-compose 기반으로 진행 예정이기에 향후 k8s 부분 재학습


# 기록사항
Actuator
- 개발 환경에서는 유용하지만 상용 환경에서는 제한적으로 사용 필요

Docker
- docker는 레이어 분리를 통해 docker build 시 변경사항만 빌드하도록 구성

API
- 내부개발자용으로 openapi + swagger 활용 / tag, operation, apiResponse 등으로 상세 활용

공통모듈
- spring에서 서비스와 aop의 관계처럼, 마이크로서비스에서 공통모듈은 '단일 책임을 나누는 조력자'로서 역할 수행
- util, logging, security 등은 공통 모듈로 관리가 용이

MapStruct
- entity와 dto 변환을 처리해주는 라이브러리

Persistency
- delete는 멱등성을 지녀야 함 / 즉 데이터 삭제 여부와 무관하게 반환값이 같아야 함

Event Streaming
- StreamBridge를 활용하여 특정 메시징 플랫폼에 대한 의존성을 분리
- 실제 프로젝트에서는 리액티브 + 이벤트 처리를 복합적으로 활용
- 클라이언트 요청은 리액티브로 받되, 이후 결과 처리는 이벤트 활용
- 이벤트 전송을 위한 별도의 Event 구조체를 사용하는 경우가 흔함

Config Server
- 클라이언트 구성 서버에 먼저 접근할 시, 구성 서버가 단일 장애지점이 될 수 있다는 우려 발생
- 서비스 검색 서버에 먼저 접근하는 방식으로 해결 가능하지만, 설정 없이 app이 동작해야 함
- 대게의 경우 config -> discovery 순서의 접근이 안전
- 구성 저장소에서 application.yml은 모든 서비스에 공통으로 적용
- 구성 서버의 encrypt, decrypt를 통해 민감정보 암호화

Resilience4j
- 재시도 메커니즘은 멱등성 보장 서비스에만 적용

Selth & Zipkin
- 의존성 및 설정파일로 적용 가능
- 세부적인 조작은 코드 작성

minikube
- wsl에 설정된 메모리 부족 시 .wslconfig 설정
- minikube 실행 중 권한 문제로 일부 pod 동작 이상 시, 아래와 같이 해결
- sudo sysctl -w net.netfilter.nf_conntrack_max=131072

k8s
- pod 조회 :  kubectl get pods --namespace=[namespace]
- log 조회 : kubectl logs [pod-name] --namespace=[namespace]
- 1인 개발의 운영 환경에는 k3s로 시작하는 편이 효율적


# 향후 검토사항
- k8s 사용 시 단일장애지점 문제
- 기존 eureka와 같은 spring cloud 서버를 k8s로 대체할 때 발생할 수 있는 의존성 문제